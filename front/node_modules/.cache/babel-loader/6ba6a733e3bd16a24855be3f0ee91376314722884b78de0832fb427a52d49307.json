{"ast":null,"code":"var _jsxFileName = \"/app/src/Messagerie/Channel/ChannelPassword.tsx\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from 'react';\nimport { ChannelsContext } from './ChannelsUtils';\nimport axios from 'axios';\n/*\tRessources\t*/\nimport close from '../../Profile/Components/MainInfo/Ressources/close.svg';\nimport search from '../Ressources/search.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst InputPassword = _ref => {\n  let {\n    icon,\n    content,\n    password,\n    setPassword\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-flat\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: icon,\n        alt: \"search icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 22,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        placeholder: content,\n        value: password,\n        onChange: e => {\n          setPassword(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 23,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 21,\n      columnNumber: 4\n    }, this)\n  }, void 0, false);\n};\n_c = InputPassword;\nexport const ChannelPassword = _ref2 => {\n  _s();\n  let {\n    handleChannelPasswordTrigger,\n    Channel\n  } = _ref2;\n  const me = document.getElementsByClassName('popup');\n  const [password, setPassword] = useState('');\n  const {\n    SaveChannel,\n    setSaveChannel\n  } = useContext(ChannelsContext);\n  useEffect(() => {\n    window.onclick = event => {\n      if (event.target === me[0]) {\n        handleChannelPasswordTrigger();\n      }\n    };\n  }, [me, handleChannelPasswordTrigger]);\n  const handleJoinProtected = async (Channel, password) => {\n    if (!inputProtectionPassword(password)) {\n      setPassword('');\n      return;\n    }\n    if (!Channel) return;\n    if (Channel.state !== 'PROTECTED') return;\n    if (!password) return;\n    try {\n      await axios.post('http://localhost:3333/chat/join/' + Channel.name, {\n        state: 'PROTECTED',\n        password: password\n      }, {\n        withCredentials: true\n      });\n      setSaveChannel([...SaveChannel, Channel]);\n      handleChannelPasswordTrigger();\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new-dm\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: close,\n      alt: \"close-button\",\n      onClick: handleChannelPasswordTrigger\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [\"Join \", Channel.name]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(InputPassword, {\n      icon: search,\n      content: \"Password\",\n      password: password,\n      setPassword: setPassword\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"new-dm-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleJoinProtected(Channel, password),\n        children: \"Join\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleChannelPasswordTrigger,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 3\n  }, this);\n};\n_s(ChannelPassword, \"ZqckOzIyole9G7XY9N32eFHWuwg=\");\n_c2 = ChannelPassword;\nvar _c, _c2;\n$RefreshReg$(_c, \"InputPassword\");\n$RefreshReg$(_c2, \"ChannelPassword\");","map":{"version":3,"names":["useContext","useEffect","useState","ChannelsContext","axios","close","search","jsxDEV","_jsxDEV","Fragment","_Fragment","InputPassword","_ref","icon","content","password","setPassword","children","className","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","_c","ChannelPassword","_ref2","_s","handleChannelPasswordTrigger","Channel","me","document","getElementsByClassName","SaveChannel","setSaveChannel","window","onclick","event","handleJoinProtected","inputProtectionPassword","state","post","name","withCredentials","error","console","log","onClick","_c2","$RefreshReg$"],"sources":["/app/src/Messagerie/Channel/ChannelPassword.tsx"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\nimport { ChannelDto, ChannelsContext } from './ChannelsUtils';\nimport axios from 'axios';\n/*\tRessources\t*/\nimport close from '../../Profile/Components/MainInfo/Ressources/close.svg';\nimport search from '../Ressources/search.svg';\n\nconst InputPassword = ({\n\ticon,\n\tcontent,\n\tpassword,\n\tsetPassword,\n}: {\n\ticon: string;\n\tcontent: string;\n\tpassword: string;\n\tsetPassword: (password: string) => void;\n}) => {\n\treturn (\n\t\t<>\n\t\t\t<div className=\"input-flat\">\n\t\t\t\t<img src={icon} alt=\"search icon\" />\n\t\t\t\t<input\n\t\t\t\t\ttype=\"password\"\n\t\t\t\t\tplaceholder={content}\n\t\t\t\t\tvalue={password}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetPassword(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nexport const ChannelPassword = ({\n\thandleChannelPasswordTrigger,\n\tChannel,\n}: {\n\thandleChannelPasswordTrigger: () => void;\n\tChannel: ChannelDto;\n}) => {\n\tconst me = document.getElementsByClassName('popup');\n\tconst [password, setPassword] = useState('');\n\tconst { SaveChannel, setSaveChannel } = useContext(ChannelsContext);\n\n\tuseEffect(() => {\n\t\twindow.onclick = (event: any) => {\n\t\t\tif (event.target === me[0]) {\n\t\t\t\thandleChannelPasswordTrigger();\n\t\t\t}\n\t\t};\n\t}, [me, handleChannelPasswordTrigger]);\n\n\tconst handleJoinProtected = async (\n\t\tChannel: ChannelDto,\n\t\tpassword: string\n\t) => {\n\t\tif (!inputProtectionPassword(password)) {\n\t\t\tsetPassword('');\n\t\t\treturn;\n\t\t}\n\t\tif (!Channel) return;\n\t\tif (Channel.state !== 'PROTECTED') return;\n\t\tif (!password) return;\n\t\ttry {\n\t\t\tawait axios.post(\n\t\t\t\t'http://localhost:3333/chat/join/' + Channel.name,\n\t\t\t\t{ state: 'PROTECTED', password: password },\n\t\t\t\t{ withCredentials: true }\n\t\t\t);\n\t\t\tsetSaveChannel([...SaveChannel, Channel]);\n\t\t\thandleChannelPasswordTrigger();\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"new-dm\">\n\t\t\t<img\n\t\t\t\tsrc={close}\n\t\t\t\talt=\"close-button\"\n\t\t\t\tonClick={handleChannelPasswordTrigger}\n\t\t\t/>\n\t\t\t<h3>Join {Channel.name}</h3>\n\t\t\t<InputPassword\n\t\t\t\ticon={search}\n\t\t\t\tcontent=\"Password\"\n\t\t\t\tpassword={password}\n\t\t\t\tsetPassword={setPassword}\n\t\t\t/>\n\t\t\t<div className=\"new-dm-buttons\">\n\t\t\t\t<button onClick={() => handleJoinProtected(Channel, password)}>\n\t\t\t\t\tJoin\n\t\t\t\t</button>\n\t\t\t\t<button onClick={handleChannelPasswordTrigger}>Cancel</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}