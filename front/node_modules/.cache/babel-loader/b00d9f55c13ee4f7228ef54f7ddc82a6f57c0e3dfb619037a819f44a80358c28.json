{"ast":null,"code":"var _jsxFileName = \"/app/src/Messagerie/Channel/ChannelElement.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$();\nimport React, { useState, useCallback, useEffect } from 'react';\nimport axios from 'axios';\nimport '../Dm/DmElement.css';\n/*\tComponents\t*/\nimport { PopUp } from '../../Profile/Components/MainInfo/MainInfo';\nimport MessageInput from '../Dm/MessageInput';\nimport { BasicFrame } from '../../Profile/Components/MiddleInfo/MiddleInfo';\n/*\tRessources\t*/\nimport close from '../../Profile/Components/MainInfo/Ressources/close.svg';\nimport search from '../Ressources/search.svg';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst InputFlat = _ref => {\n  _s();\n  let {\n    icon,\n    content,\n    userInfo,\n    selectedUser,\n    setSelectedUser\n  } = _ref;\n  const [searchTerm, setSearchTerm] = useState('');\n  const [searchResults, setSearchResults] = useState([]);\n  const [users, setUsers] = useState([]);\n  useEffect(() => {\n    const FetchUsers = async () => {\n      try {\n        const response = await axios.get('http://localhost:3333/users/login', {\n          withCredentials: true\n        });\n        setUsers(response.data.filter(user => user.username !== (userInfo === null || userInfo === void 0 ? void 0 : userInfo.username)));\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    FetchUsers();\n  }, [userInfo]);\n  useEffect(() => {\n    const searchUsers = searchTerm => {\n      const results = users.filter(user => user.username.toLowerCase().includes(searchTerm.toLowerCase()));\n      setSearchResults(results);\n    };\n    searchUsers(searchTerm);\n  }, [searchTerm, users]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-flat\",\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: icon,\n        alt: \"search icon\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: content,\n        value: searchTerm,\n        onChange: e => {\n          setSearchTerm(e.target.value);\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-select\",\n      children: /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedUser,\n        onChange: e => setSelectedUser(e.target.value),\n        children: searchResults.length > 0 ? searchResults.map((user, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: user.username,\n          children: user.username\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 9\n        }, this)) : users.map((user, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: user.username,\n          children: user.username\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 9\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n_s(InputFlat, \"3mmtDtfiBW3sRCtksQmZknrhdDc=\");\n_c = InputFlat;\nconst NewChannel = _ref2 => {\n  _s2();\n  let {\n    handleNewDmTrigger,\n    userInfo\n  } = _ref2;\n  const me = document.getElementsByClassName('popup');\n  const [blocked, setBlocked] = useState([]);\n  const [selectedUser, setSelectedUser] = useState('');\n  useEffect(() => {\n    window.onclick = event => {\n      if (event.target === me[0]) {\n        handleNewDmTrigger();\n      }\n    };\n  }, [me, handleNewDmTrigger]);\n  useEffect(() => {\n    const FetchBlocked = async () => {\n      try {\n        const response = await axios.get('http://localhost:3333/friend/blocked', {\n          withCredentials: true\n        });\n        setBlocked(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    FetchBlocked();\n  }, []);\n  const handleCreateDM = async username => {\n    if (username === '') return;\n    if (blocked !== null && blocked !== void 0 && blocked.find(user => user.username === username)) {\n      console.log('user blocked');\n      return;\n    }\n    try {\n      await axios.post('http://localhost:3333/chat/dm/create', {\n        username\n      }, {\n        withCredentials: true\n      });\n      handleNewDmTrigger();\n    } catch (error) {\n      console.log('DM already exist');\n      console.log(error);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"new-dm\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: close,\n      alt: \"close-button\",\n      onClick: handleNewDmTrigger\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"New DM\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(InputFlat, {\n      icon: search,\n      content: \"Search a user\",\n      userInfo: userInfo,\n      selectedUser: selectedUser,\n      setSelectedUser: setSelectedUser\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"new-dm-buttons\",\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleCreateDM(selectedUser),\n        children: \"Create\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 162,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleNewDmTrigger,\n        children: \"Cancel\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 151,\n    columnNumber: 3\n  }, this);\n};\n_s2(NewChannel, \"sKxTXkGLB4zJs6sg3Qtlc6iBomA=\");\n_c2 = NewChannel;\nconst ChannelListElement = _ref3 => {\n  let {\n    Channel,\n    selectedChannel,\n    setSelectedChannel\n  } = _ref3;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `dm-list-element ${Channel.id === (selectedChannel === null || selectedChannel === void 0 ? void 0 : selectedChannel.id) && 'active'}`,\n    onClick: () => setSelectedChannel(Channel),\n    children: /*#__PURE__*/_jsxDEV(\"h4\", {\n      children: Channel.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 181,\n    columnNumber: 3\n  }, this);\n};\n_c3 = ChannelListElement;\nconst ChannelLists = _ref4 => {\n  let {\n    ChannelList,\n    userInfo,\n    selectedChannel,\n    setSelectedChannel\n  } = _ref4;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dm-list\",\n    children: ChannelList.map((Channel, index) => {\n      return /*#__PURE__*/_jsxDEV(ChannelListElement, {\n        Channel: Channel,\n        selectedChannel: selectedChannel,\n        setSelectedChannel: setSelectedChannel\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 6\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 3\n  }, this);\n};\n_c4 = ChannelLists;\nconst Aside = _ref5 => {\n  _s3();\n  let {\n    buttonContent,\n    ChannelList,\n    userInfo,\n    selectedChannel,\n    setSelectedChannel\n  } = _ref5;\n  const [newDmTrigger, setNewDmTrigger] = useState(false);\n  const handleNewDmTrigger = useCallback(() => {\n    setNewDmTrigger(!newDmTrigger);\n  }, [newDmTrigger, setNewDmTrigger]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dm-aside\",\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"new-input\",\n      onClick: handleNewDmTrigger,\n      children: buttonContent\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(ChannelLists, {\n      ChannelList: ChannelList,\n      userInfo: userInfo,\n      selectedChannel: selectedChannel,\n      setSelectedChannel: setSelectedChannel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(PopUp, {\n      trigger: newDmTrigger,\n      children: /*#__PURE__*/_jsxDEV(NewChannel, {\n        handleNewDmTrigger: handleNewDmTrigger,\n        userInfo: userInfo\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 3\n  }, this);\n};\n_s3(Aside, \"y4Qc069jevXoTzUDJD4HcbG3PWY=\");\n_c5 = Aside;\nconst Beside = _ref6 => {\n  _s4();\n  let {\n    socket,\n    Channel,\n    userInfo,\n    setSelectedChannel\n  } = _ref6;\n  const [messages, setMessages] = useState([]);\n  const [blocked, setBlocked] = useState([]);\n  useEffect(() => {\n    const fetchBlocked = async () => {\n      try {\n        const response = await axios.get('http://localhost:3333/friend/blocked', {\n          withCredentials: true\n        });\n        setBlocked(response.data);\n      } catch (error) {}\n    };\n    fetchBlocked();\n  }, [messages]);\n  useEffect(() => {\n    const handleMessage = message => {\n      if (!blocked.find(user => user.username === message.username)) setMessages([...messages, message]);\n    };\n    socket === null || socket === void 0 ? void 0 : socket.on('chat', handleMessage);\n    socket === null || socket === void 0 ? void 0 : socket.on('kick', data => {\n      if ((data === null || data === void 0 ? void 0 : data.username) === (userInfo === null || userInfo === void 0 ? void 0 : userInfo.username)) {\n        setSelectedChannel(Channel);\n        setMessages([]);\n      }\n    });\n    socket === null || socket === void 0 ? void 0 : socket.on('ban', data => {\n      if ((data === null || data === void 0 ? void 0 : data.username) === (userInfo === null || userInfo === void 0 ? void 0 : userInfo.username)) {\n        setSelectedChannel(Channel);\n        setMessages([]);\n      }\n    });\n    return () => {\n      socket === null || socket === void 0 ? void 0 : socket.off('chat', handleMessage);\n      socket === null || socket === void 0 ? void 0 : socket.off('kick');\n      socket === null || socket === void 0 ? void 0 : socket.off('ban');\n    };\n  }, [Channel, blocked, messages, setSelectedChannel, socket, userInfo === null || userInfo === void 0 ? void 0 : userInfo.username]);\n  const sendMessage = message => {\n    if (!message.content || !Channel) return;\n    socket === null || socket === void 0 ? void 0 : socket.emit('chat', {\n      ...message,\n      channel: Channel.name\n    });\n    setMessages(messages => [message, ...messages]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dm-beside\",\n    children: [/*#__PURE__*/_jsxDEV(BasicFrame, {\n      height: \"91%\",\n      title: !Channel || Channel.id === 0 ? 'No Chat selected' : Channel.name,\n      children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `chat-bubble ${(userInfo === null || userInfo === void 0 ? void 0 : userInfo.username) === message.username ? 'chat-me' : 'chat-you'}`,\n        children: (userInfo === null || userInfo === void 0 ? void 0 : userInfo.username) === message.username && /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 341,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"chat-avatar\",\n            src: message.avatar,\n            alt: \"avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 342,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: new Date(message.createdAt).getHours() + ':' + new Date(message.createdAt).getMinutes().toString().padStart(2, '0')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true) || /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: new Date(message.createdAt).getHours() + ':' + new Date(message.createdAt).getMinutes().toString().padStart(2, '0')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"chat-avatar\",\n            src: message.avatar,\n            alt: \"avatar\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: message.content\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 332,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(MessageInput, {\n      sendMessage: sendMessage,\n      userInfo: userInfo\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 323,\n    columnNumber: 3\n  }, this);\n};\n_s4(Beside, \"0hE86R8uVsZuZXq6+IreaR+PEFw=\");\n_c6 = Beside;\nexport const ChannelElement = _ref7 => {\n  _s5();\n  let {\n    socket\n  } = _ref7;\n  const [userInfo, setUserInfo] = useState();\n  const [ChannelList, setChannelList] = useState([]);\n  const [selectedChannel, setSelectedChannel] = useState();\n  useEffect(() => {\n    const fetchData = async () => {\n      const response = await axios.get('http://localhost:3333/users/me', {\n        withCredentials: true\n      });\n      setUserInfo(response.data);\n    };\n    const fetchChats = async () => {\n      try {\n        const Channels = await axios.get('http://localhost:3333/chat/channels', {\n          withCredentials: true\n        });\n        setChannelList(Channels.data);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchData();\n    fetchChats();\n    const interval = setInterval(fetchChats, 5000);\n    return () => clearInterval(interval);\n  }, [userInfo === null || userInfo === void 0 ? void 0 : userInfo.username]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dm-element\",\n    children: [/*#__PURE__*/_jsxDEV(Aside, {\n      buttonContent: \"New Channel\",\n      ChannelList: ChannelList,\n      userInfo: userInfo,\n      selectedChannel: selectedChannel,\n      setSelectedChannel: setSelectedChannel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Beside, {\n      socket: socket,\n      Channel: selectedChannel,\n      userInfo: userInfo,\n      setSelectedChannel: setSelectedChannel\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 428,\n    columnNumber: 3\n  }, this);\n};\n_s5(ChannelElement, \"uEtuLnEig90JhxjLFwhPdN4CZAE=\");\n_c7 = ChannelElement;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7;\n$RefreshReg$(_c, \"InputFlat\");\n$RefreshReg$(_c2, \"NewChannel\");\n$RefreshReg$(_c3, \"ChannelListElement\");\n$RefreshReg$(_c4, \"ChannelLists\");\n$RefreshReg$(_c5, \"Aside\");\n$RefreshReg$(_c6, \"Beside\");\n$RefreshReg$(_c7, \"ChannelElement\");","map":{"version":3,"names":["React","useState","useCallback","useEffect","axios","PopUp","MessageInput","BasicFrame","close","search","jsxDEV","_jsxDEV","Fragment","_Fragment","InputFlat","_ref","_s","icon","content","userInfo","selectedUser","setSelectedUser","searchTerm","setSearchTerm","searchResults","setSearchResults","users","setUsers","FetchUsers","response","get","withCredentials","data","filter","user","username","error","console","log","searchUsers","results","toLowerCase","includes","children","className","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","value","onChange","e","target","length","map","index","_c","NewChannel","_ref2","_s2","handleNewDmTrigger","me","document","getElementsByClassName","blocked","setBlocked","window","onclick","event","FetchBlocked","handleCreateDM","find","post","onClick","_c2","ChannelListElement","_ref3","Channel","selectedChannel","setSelectedChannel","id","name","_c3","ChannelLists","_ref4","ChannelList","_c4","Aside","_ref5","_s3","buttonContent","newDmTrigger","setNewDmTrigger","trigger","_c5","Beside","_ref6","_s4","socket","messages","setMessages","fetchBlocked","handleMessage","message","on","off","sendMessage","emit","channel","height","title","avatar","Date","createdAt","getHours","getMinutes","toString","padStart","_c6","ChannelElement","_ref7","_s5","setUserInfo","setChannelList","fetchData","fetchChats","Channels","interval","setInterval","clearInterval","_c7","$RefreshReg$"],"sources":["/app/src/Messagerie/Channel/ChannelElement.tsx"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react';\nimport axios from 'axios';\nimport { Socket } from 'socket.io-client';\nimport '../Dm/DmElement.css';\n/*\tComponents\t*/\nimport { PopUp } from '../../Profile/Components/MainInfo/MainInfo';\nimport MessageInput from '../Dm/MessageInput';\nimport { BasicFrame } from '../../Profile/Components/MiddleInfo/MiddleInfo';\n/*\tRessources\t*/\nimport close from '../../Profile/Components/MainInfo/Ressources/close.svg';\nimport search from '../Ressources/search.svg';\n\nconst InputFlat = ({\n\ticon,\n\tcontent,\n\tuserInfo,\n\tselectedUser,\n\tsetSelectedUser,\n}: {\n\ticon: string;\n\tcontent: string;\n\tuserInfo: userInfoDto | undefined;\n\tselectedUser: string;\n\tsetSelectedUser: React.Dispatch<React.SetStateAction<string>>;\n}) => {\n\tconst [searchTerm, setSearchTerm] = useState('');\n\tconst [searchResults, setSearchResults] = useState<userInfoDto[]>([]);\n\tconst [users, setUsers] = useState<userInfoDto[]>([]);\n\n\n\tuseEffect(() => {\n\t\tconst FetchUsers = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\n\t\t\t\t\t'http://localhost:3333/users/login',\n\t\t\t\t\t{ withCredentials: true }\n\t\t\t\t);\n\t\t\t\tsetUsers(\n\t\t\t\t\tresponse.data.filter(\n\t\t\t\t\t\t(user: userInfoDto) =>\n\t\t\t\t\t\t\tuser.username !== userInfo?.username\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t};\n\n\t\tFetchUsers();\n\t}, [userInfo]);\n\n\tuseEffect(() => {\n\t\tconst searchUsers = (searchTerm: string) => {\n\t\t\tconst results = users.filter((user) =>\n\t\t\t\tuser.username.toLowerCase().includes(searchTerm.toLowerCase())\n\t\t\t);\n\t\t\tsetSearchResults(results);\n\t\t};\n\n\t\tsearchUsers(searchTerm);\n\t}, [searchTerm, users]);\n\n\treturn (\n\t\t<>\n\t\t\t<div className=\"input-flat\">\n\t\t\t\t<img src={icon} alt=\"search icon\" />\n\t\t\t\t<input\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\tplaceholder={content}\n\t\t\t\t\tvalue={searchTerm}\n\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\tsetSearchTerm(e.target.value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"input-select\">\n\t\t\t\t<select\n\t\t\t\t\tvalue={selectedUser}\n\t\t\t\t\tonChange={(e) => setSelectedUser(e.target.value)}>\n\t\t\t\t\t{searchResults.length > 0\n\t\t\t\t\t\t? searchResults.map((user, index) => (\n\t\t\t\t\t\t\t\t<option key={index} value={user.username}>\n\t\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))\n\t\t\t\t\t\t: users.map((user, index) => (\n\t\t\t\t\t\t\t\t<option key={index} value={user.username}>\n\t\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t</select>\n\t\t\t</div>\n\t\t</>\n\t);\n};\n\nconst NewChannel = ({\n\thandleNewDmTrigger,\n\tuserInfo,\n}: {\n\thandleNewDmTrigger: () => void;\n\tuserInfo: userInfoDto | undefined;\n}) => {\n\tconst me = document.getElementsByClassName('popup');\n\tconst [blocked, setBlocked] = useState<userInfoDto[]>([]);\n\tconst [selectedUser, setSelectedUser] = useState('');\n\n\tuseEffect(() => {\n\t\twindow.onclick = (event: any) => {\n\t\t\tif (event.target === me[0]) {\n\t\t\t\thandleNewDmTrigger();\n\t\t\t}\n\t\t};\n\t}, [me, handleNewDmTrigger]);\n\n\tuseEffect(() => {\n\t\tconst FetchBlocked = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\n\t\t\t\t\t'http://localhost:3333/friend/blocked',\n\t\t\t\t\t{ withCredentials: true }\n\t\t\t\t);\n\t\t\t\tsetBlocked(response.data);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t};\n\t\tFetchBlocked();\n\t}, []);\n\n\tconst handleCreateDM = async (username: string) => {\n\t\tif (username === '') return;\n\t\tif (blocked?.find((user) => user.username === username)) {\n\t\t\tconsole.log('user blocked');\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tawait axios.post(\n\t\t\t\t'http://localhost:3333/chat/dm/create',\n\t\t\t\t{ username },\n\t\t\t\t{ withCredentials: true }\n\t\t\t);\n\t\t\thandleNewDmTrigger();\n\t\t} catch (error) {\n\t\t\tconsole.log('DM already exist');\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\treturn (\n\t\t<div className=\"new-dm\">\n\t\t\t<img src={close} alt=\"close-button\" onClick={handleNewDmTrigger} />\n\t\t\t<h3>New DM</h3>\n\t\t\t<InputFlat\n\t\t\t\ticon={search}\n\t\t\t\tcontent=\"Search a user\"\n\t\t\t\tuserInfo={userInfo}\n\t\t\t\tselectedUser={selectedUser}\n\t\t\t\tsetSelectedUser={setSelectedUser}\n\t\t\t/>\n\t\t\t<div className=\"new-dm-buttons\">\n\t\t\t\t<button onClick={() => handleCreateDM(selectedUser)}>Create</button>\n\t\t\t\t<button onClick={handleNewDmTrigger}>Cancel</button>\n\t\t\t</div>\n\t\t</div>\n\t);\n};\n\nconst ChannelListElement = ({\n\tChannel,\n\tselectedChannel,\n\tsetSelectedChannel,\n}: {\n\tChannel: ChannelDto;\n\tselectedChannel: ChannelDto | undefined;\n\tsetSelectedChannel: React.Dispatch<\n\t\tReact.SetStateAction<ChannelDto | undefined>\n\t>;\n}) => {\n\treturn (\n\t\t<div\n\t\t\tclassName={`dm-list-element ${\n\t\t\t\tChannel.id === selectedChannel?.id && 'active'\n\t\t\t}`}\n\t\t\tonClick={() => setSelectedChannel(Channel)}>\n\t\t\t<h4>{Channel.name}</h4>\n\t\t</div>\n\t);\n};\n\nconst ChannelLists = ({\n\tChannelList,\n\tuserInfo,\n\tselectedChannel,\n\tsetSelectedChannel,\n}: {\n\tChannelList: ChannelDto[];\n\tuserInfo: userInfoDto | undefined;\n\tselectedChannel: ChannelDto | undefined;\n\tsetSelectedChannel: React.Dispatch<\n\t\tReact.SetStateAction<ChannelDto | undefined>\n\t>;\n}) => {\n\treturn (\n\t\t<div className=\"dm-list\">\n\t\t\t{ChannelList.map((Channel, index) => {\n\t\t\t\treturn (\n\t\t\t\t\t<ChannelListElement\n\t\t\t\t\t\tChannel={Channel}\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tselectedChannel={selectedChannel}\n\t\t\t\t\t\tsetSelectedChannel={setSelectedChannel}\n\t\t\t\t\t/>\n\t\t\t\t);\n\t\t\t})}\n\t\t</div>\n\t);\n};\n\nconst Aside = ({\n\tbuttonContent,\n\tChannelList,\n\tuserInfo,\n\tselectedChannel,\n\tsetSelectedChannel,\n}: {\n\tbuttonContent: string;\n\tChannelList: ChannelDto[];\n\tuserInfo: userInfoDto | undefined;\n\tselectedChannel: ChannelDto | undefined;\n\tsetSelectedChannel: React.Dispatch<\n\t\tReact.SetStateAction<ChannelDto | undefined>\n\t>;\n}) => {\n\tconst [newDmTrigger, setNewDmTrigger] = useState(false);\n\n\tconst handleNewDmTrigger = useCallback(() => {\n\t\tsetNewDmTrigger(!newDmTrigger);\n\t}, [newDmTrigger, setNewDmTrigger]);\n\n\treturn (\n\t\t<div className=\"dm-aside\">\n\t\t\t<button className=\"new-input\" onClick={handleNewDmTrigger}>\n\t\t\t\t{buttonContent}\n\t\t\t</button>\n\t\t\t<ChannelLists\n\t\t\t\tChannelList={ChannelList}\n\t\t\t\tuserInfo={userInfo}\n\t\t\t\tselectedChannel={selectedChannel}\n\t\t\t\tsetSelectedChannel={setSelectedChannel}\n\t\t\t/>\n\t\t\t<PopUp trigger={newDmTrigger}>\n\t\t\t\t<NewChannel\n\t\t\t\t\thandleNewDmTrigger={handleNewDmTrigger}\n\t\t\t\t\tuserInfo={userInfo}\n\t\t\t\t/>\n\t\t\t</PopUp>\n\t\t</div>\n\t);\n};\n\ninterface Props {\n\tsocket: Socket;\n\tChannel: ChannelDto | undefined;\n\tuserInfo: userInfoDto | undefined;\n\tsetSelectedChannel: React.Dispatch<\n\t\tReact.SetStateAction<ChannelDto | undefined>\n\t>;\n}\n\nconst Beside = ({ socket, Channel, userInfo, setSelectedChannel }: Props) => {\n\tconst [messages, setMessages] = useState<any[]>([]);\n\tconst [blocked, setBlocked] = useState<userInfoDto[]>([]);\n\n\tuseEffect(() => {\n\t\tconst fetchBlocked = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\n\t\t\t\t\t'http://localhost:3333/friend/blocked',\n\t\t\t\t\t{\n\t\t\t\t\t\twithCredentials: true,\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t\tsetBlocked(response.data);\n\t\t\t} catch (error) {}\n\t\t};\n\t\tfetchBlocked();\n\t}, [messages]);\n\n\tuseEffect(() => {\n\t\tconst handleMessage = (message: any) => {\n\t\t\tif (!blocked.find((user) => user.username === message.username))\n\t\t\t\tsetMessages([...messages, message]);\n\t\t};\n\n\t\tsocket?.on('chat', handleMessage);\n\t\tsocket?.on('kick', (data: any) => {\n\t\t\tif (data?.username === userInfo?.username) {\n\t\t\t\tsetSelectedChannel(Channel);\n\t\t\t\tsetMessages([]);\n\t\t\t}\n\t\t});\n\t\tsocket?.on('ban', (data: any) => {\n\t\t\tif (data?.username === userInfo?.username) {\n\t\t\t\tsetSelectedChannel(Channel);\n\t\t\t\tsetMessages([]);\n\t\t\t}\n\t\t});\n\t\treturn () => {\n\t\t\tsocket?.off('chat', handleMessage);\n\t\t\tsocket?.off('kick');\n\t\t\tsocket?.off('ban');\n\t\t};\n\t}, [Channel, blocked, messages, setSelectedChannel, socket, userInfo?.username]);\n\n\tconst sendMessage = (message: any) => {\n\t\tif (!message.content || !Channel) return;\n\t\tsocket?.emit('chat', { ...message, channel: Channel.name });\n\t\tsetMessages((messages) => [message, ...messages]);\n\t};\n\n\treturn (\n\t\t<div className=\"dm-beside\">\n\t\t\t<BasicFrame\n\t\t\t\theight=\"91%\"\n\t\t\t\ttitle={\n\t\t\t\t\t!Channel || Channel.id === 0\n\t\t\t\t\t\t? 'No Chat selected'\n\t\t\t\t\t\t: Channel.name\n\t\t\t\t}>\n\t\t\t\t{messages.map((message, index) => (\n\t\t\t\t\t<div\n\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\tclassName={`chat-bubble ${\n\t\t\t\t\t\t\tuserInfo?.username === message.username\n\t\t\t\t\t\t\t\t? 'chat-me'\n\t\t\t\t\t\t\t\t: 'chat-you'\n\t\t\t\t\t\t}`}>\n\t\t\t\t\t\t{(userInfo?.username === message.username && (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>{message.content}</p>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName=\"chat-avatar\"\n\t\t\t\t\t\t\t\t\tsrc={message.avatar}\n\t\t\t\t\t\t\t\t\talt=\"avatar\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t{new Date(message.createdAt).getHours() +\n\t\t\t\t\t\t\t\t\t\t':' +\n\t\t\t\t\t\t\t\t\t\tnew Date(message.createdAt)\n\t\t\t\t\t\t\t\t\t\t\t.getMinutes()\n\t\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t\t\t\t.padStart(2, '0')}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)) || (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<p>\n\t\t\t\t\t\t\t\t\t{new Date(message.createdAt).getHours() +\n\t\t\t\t\t\t\t\t\t\t':' +\n\t\t\t\t\t\t\t\t\t\tnew Date(message.createdAt)\n\t\t\t\t\t\t\t\t\t\t\t.getMinutes()\n\t\t\t\t\t\t\t\t\t\t\t.toString()\n\t\t\t\t\t\t\t\t\t\t\t.padStart(2, '0')}\n\t\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tclassName=\"chat-avatar\"\n\t\t\t\t\t\t\t\t\tsrc={message.avatar}\n\t\t\t\t\t\t\t\t\talt=\"avatar\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<p>{message.content}</p>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t))}\n\t\t\t</BasicFrame>\n\t\t\t<MessageInput sendMessage={sendMessage} userInfo={userInfo} />\n\t\t</div>\n\t);\n};\n\nexport interface ChannelDto {\n\tid: number;\n\tname: string;\n\tstate: string;\n\townerId: number;\n\tChatUsers: any[];\n}\n\nexport interface userInfoDto {\n\tid: number;\n\tusername: string;\n\tavatar: string;\n}\n\nexport const ChannelElement = ({socket}: {socket: Socket}) => {\n\tconst [userInfo, setUserInfo] = useState<userInfoDto>();\n\tconst [ChannelList, setChannelList] = useState<ChannelDto[]>([]);\n\tconst [selectedChannel, setSelectedChannel] = useState<ChannelDto>();\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\tconst response = await axios.get('http://localhost:3333/users/me', {\n\t\t\t\twithCredentials: true,\n\t\t\t});\n\t\t\tsetUserInfo(response.data);\n\t\t};\n\n\t\tconst fetchChats = async () => {\n\t\t\ttry {\n\t\t\t\tconst Channels = await axios.get<ChannelDto[]>(\n\t\t\t\t\t'http://localhost:3333/chat/channels',\n\t\t\t\t\t{ withCredentials: true }\n\t\t\t\t);\n\t\t\t\tsetChannelList(Channels.data);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.error(error);\n\t\t\t}\n\t\t};\n\n\t\tfetchData();\n\t\tfetchChats();\n\t\tconst interval = setInterval(fetchChats, 5000);\n\t\treturn () => clearInterval(interval);\n\t}, [userInfo?.username]);\n\n\treturn (\n\t\t<div className=\"dm-element\">\n\t\t\t<Aside\n\t\t\t\tbuttonContent=\"New Channel\"\n\t\t\t\tChannelList={ChannelList}\n\t\t\t\tuserInfo={userInfo}\n\t\t\t\tselectedChannel={selectedChannel}\n\t\t\t\tsetSelectedChannel={setSelectedChannel}\n\t\t\t/>\n\t\t\t<Beside socket={socket} Channel={selectedChannel} userInfo={userInfo} setSelectedChannel={setSelectedChannel} />\n\t\t</div>\n\t);\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}