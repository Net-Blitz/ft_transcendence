{"ast":null,"code":"var _jsxFileName = \"/app/src/Game/GameRoute.tsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport AppLayout from \"../AppLayout\";\nimport Game from \"./Game\";\nimport Lobby from \"./Lobby\";\nimport LobbyCreation from \"./LobbyCreation\";\nimport { Navigate, useLocation } from 'react-router-dom';\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GameRoute = _ref => {\n  _s();\n  let {\n    socketQueue,\n    socketGame,\n    reload,\n    setReload\n  } = _ref;\n  const [state, updateState] = useState({});\n  const location = useLocation();\n  const update = location.state;\n  useEffect(() => {\n    axios.get(\"http://localhost:3333/queues/joinable\", {\n      withCredentials: true\n    }).then(res => {\n      if (res.data.canJoin) updateState({\n        code: 0,\n        login: res.data.login,\n        mode: \"1v1\",\n        room: 0\n      });\n      if (res.data.reason === \"searching\") updateState({\n        code: 1,\n        login: res.data.login,\n        mode: \"\",\n        room: 0\n      });\n      if (res.data.reason === \"playing\") updateState({\n        code: 2,\n        login: res.data.login,\n        mode: \"\",\n        room: res.data.gameId\n      });\n    }).catch(err => {\n      console.log(err);\n    });\n  }, [reload, update]);\n  if (state.code === undefined) return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 10\n  }, this);\n  if (state.code === 0) {\n    return /*#__PURE__*/_jsxDEV(AppLayout, {\n      children: [' ', /*#__PURE__*/_jsxDEV(LobbyCreation, {\n        socketQueue: socketQueue,\n        login: state.login,\n        mode: state.mode,\n        reload: reload,\n        setReload: setReload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 4\n    }, this);\n  }\n  if (state.code === 1) {\n    return /*#__PURE__*/_jsxDEV(AppLayout, {\n      children: [' ', /*#__PURE__*/_jsxDEV(Lobby, {\n        socketQueue: socketQueue,\n        login: state.login,\n        reload: reload,\n        setReload: setReload\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 4\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 4\n    }, this);\n  }\n  if (state.code === 2) {\n    return /*#__PURE__*/_jsxDEV(Game, {\n      socketGame: socketGame,\n      room: state.room,\n      login: state.login\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/\",\n    replace: true\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 9\n  }, this);\n};\n_s(GameRoute, \"/fBVyTEq0hOWQI53zyFyESV2ipk=\", false, function () {\n  return [useLocation];\n});\n_c = GameRoute;\nexport default GameRoute;\nvar _c;\n$RefreshReg$(_c, \"GameRoute\");","map":{"version":3,"names":["useEffect","useState","AppLayout","Game","Lobby","LobbyCreation","Navigate","useLocation","axios","jsxDEV","_jsxDEV","GameRoute","_ref","_s","socketQueue","socketGame","reload","setReload","state","updateState","location","update","get","withCredentials","then","res","data","canJoin","code","login","mode","room","reason","gameId","catch","err","console","log","undefined","fileName","_jsxFileName","lineNumber","columnNumber","children","to","replace","_c","$RefreshReg$"],"sources":["/app/src/Game/GameRoute.tsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport AppLayout from \"../AppLayout\";\nimport Game from \"./Game\";\nimport Lobby from \"./Lobby\";\nimport LobbyCreation from \"./LobbyCreation\";\nimport { Navigate, useLocation } from 'react-router-dom';\nimport axios from \"axios\";\n\n\nconst GameRoute = ({socketQueue, socketGame, reload, setReload}:any) => {\n\tconst [state, updateState] = useState({} as {code: number, login: string, mode: string, room: number});\n\tconst location = useLocation();\n\tconst update = location.state;\n\tuseEffect (() =>{\n\t\taxios.get(\"http://localhost:3333/queues/joinable\", { withCredentials: true })\n\t\t.then((res) => {\n\t\t\tif (res.data.canJoin)\n\t\t\t\tupdateState({code: 0, login: res.data.login, mode: \"1v1\", room: 0});\n\t\t\tif (res.data.reason === \"searching\")\n\t\t\t\tupdateState({code: 1, login: res.data.login, mode: \"\", room: 0});\n\t\t\tif (res.data.reason === \"playing\")\n\t\t\t\tupdateState({code: 2, login: res.data.login, mode: \"\", room: res.data.gameId});\n\t\t})\n\t\t.catch((err) => {\n\t\t\tconsole.log(err);\n\t\t});\n\n\t}, [reload, update]);\n\n\tif (state.code === undefined)\n\t\treturn <div></div>\n\tif (state.code === 0)\n\t{\n\t\treturn (\n\t\t\t<AppLayout>\n\t\t\t{' '}\n\t\t\t<LobbyCreation socketQueue={socketQueue} login={state.login} mode={state.mode} reload={reload} setReload={setReload}/>\n\t\t</AppLayout>\n\t\t)\n\t}\n\tif (state.code === 1)\n\t{\n\t\treturn (\n\t\t\t<AppLayout>\n\t\t\t{' '}\n\t\t\t<Lobby socketQueue={socketQueue} login={state.login} reload={reload} setReload={setReload}/>\n\t\t</AppLayout>\n\t\t)\n\t}\n\tif (state.code === 2)\n\t{\n\t\treturn (\n\t\t\t<Game socketGame={socketGame} room={state.room} login={state.login}/>\n\t\t)\n\t}\n\treturn <Navigate to=\"/\" replace />;\n}\n\nexport default GameRoute;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}